---
title: Monitoring Azure virtual machines
description: This article discusses how to monitor Azure virtual machines.
ms.service: virtual-machines
ms.topic: article
ms.custom: subject-monitoring
ms.date: 11/17/2021
---

# Monitor Azure virtual machines

When you have critical applications and business processes that rely on Azure resources, it's important to monitor those resources for their availability, performance, and operation. This article describes the monitoring data that's generated by Azure virtual machines (VMs), and it discusses how to use the features of [Azure Monitor](../azure-monitor/overview.md) to analyze and alert you about this data.

> [!NOTE]
> This article provides basic information to help you get started with monitoring your VMs. For a complete guide to monitoring your entire environment of Azure and hybrid virtual machines, see [Monitor virtual machines with Azure Monitor](../azure-monitor/vm/monitor-virtual-machine.md).

## What is Azure Monitor?
[Azure Monitor](../azure-monitor/overview.md) is a full stack monitoring service that provides a complete set of features to monitor your Azure resources. You don't need to directly interact with Azure Monitor, though, to perform a variety of monitoring tasks, because its features are integrated with the Azure portal for the Azure services that it monitors. For a tutorial with an overview of how Azure Monitor works with Azure resources, see [Monitor Azure resources by using Azure Monitor](../azure-monitor/essentials/monitor-azure-resource.md).

## Monitoring virtual machine data

Azure virtual machines collect the same kinds of monitoring data as other Azure resources, which are described in [Monitoring data from Azure resources](/azure/azure-monitor/insights/monitor-azure-resource#monitoring-data). For detailed information about the metrics and logs that are created by Azure virtual machines, see [Reference: Monitoring Azure virtual machine data](monitor-vm-reference.md).

## Overview page
To begin exploring Azure Monitor, go to the **Overview** page for your virtual machine, and then select the **Monitoring** tab. The **Key Metrics** pane includes charts that show key health metrics, such as average CPU and network utilization. At the top of the pane, you can select a duration to change the time range for the charts, or select a chart to open the **Metrics** pane to drill down further or to create an alert rule. 

:::image type="content" source="media/monitor-vm/overview.png" lightbox="media/monitor-vm/overview.png" alt-text="Screenshot of the Azure virtual machines 'Key Metrics' pane.":::

## Activity log
The [Activity log](../azure-monitor/essentials/activity-log.md) displays recent activity by the virtual machine, including any configuration changes and when it was stopped and started. View the Activity log in the Azure portal, or create a [diagnostic setting to send it to a Log Analytics workspace](../azure-monitor/essentials/activity-log.md#send-to-log-analytics-workspace), where you can view events over time or analyze them with other collected data.

:::image type="content" source="media/monitor-vm/activity-log.png" lightbox="media/monitor-vm/activity-log.png" alt-text="Screenshot of the 'Activity log' pane.":::

## VM insights
Some services in Azure display customized monitoring experiences in Azure Monitor. These experiences are called *insights*, and they include pre-built workbooks and other specialized features for that particular service.  

VM insights are designed to monitor your entire set of Azure and hybrid virtual machines in a single interface. When you start monitoring multiple virtual machines in your Azure environment, you might want to consider enabling VM insights for the following features:

- Simplified onboarding of the Log Analytics agent and the Dependency agent, so that you can monitor a virtual machine guest operating system and workloads.
- Pre-defined trending performance charts and workbooks, so that you can analyze core performance metrics from the virtual machine's guest operating system.
- The Dependency map, which displays processes that run on each virtual machine and the interconnected components with other machines and external sources.

:::image type="content" source="media/monitor-vm/vminsights-01.png" lightbox="media/monitor-vm/vminsights-01.png" alt-text="Screenshot of the VM insights 'Logical Disk Performance' view.":::

:::image type="content" source="media/monitor-vm/vminsights-02.png" lightbox="media/monitor-vm/vminsights-02.png" alt-text="Screenshot of the VM insights 'Map' view.":::

For quick steps for configuring VM insights and enabling monitoring for a virtual machine, see [Enable Azure Monitor for a single virtual machine or virtual machine scale set in the Azure portal](../azure-monitor/vm/vminsights-enable-portal.md). 

For general information about enabling insights and a variety of methods for onboarding virtual machines, see [Enable VM insights overview](../azure-monitor/vm/vminsights-enable-overview.md).

## Collect guest metrics and logs
Azure Monitor starts automatically collecting metric data for your virtual machine host when you create the VM. To collect metrics from the guest operating system of the virtual machine, though, you must install an agent. When you enable [VM insights](#vm-insights), the Log Analytics agent is installed and starts sending performance data to Azure Monitor Logs, which then enables the **Performance** and **Map** views. For a tutorial on enabling VM insights for a virtual machine, see [Enable monitoring for Azure virtual machines](../azure-monitor/vm/tutorial-monitor-vm-enable.md).

After you've enabled VM insights, install the [Azure Monitor agent](../azure-monitor/agents/azure-monitor-agent-overview.md) so that you can collect guest logs from your virtual machine and send guest metrics to the Azure Monitor **Metrics** pane. By doing so, you can also [analyze metrics on the Metrics pane](#analyze-metrics). To learn how to install the Azure Monitor agent and create a data collection rule that defines the data to collect, see [Tutorial: Collect guest logs and metrics from an Azure virtual machine](../azure-monitor/vm/tutorial-monitor-vm-guest.md).

## Analyze metrics
Metrics are numerical values that describe some aspect of a system at a particular point in time. Although platform metrics for the virtual machine host are collected automatically, you must [install the Azure Monitor agent](#collect-guest-metrics-and-logs) to collect guest metrics. 

The **Overview** pane includes the most common host metrics, and you can access others by using the **Metrics** pane. With this tool, you can create charts from metric values and visually correlate trends. You can also create a metric alert rule or pin a chart to an Azure dashboard. For a tutorial on using this tool, see [Analyze metrics for an Azure resource](../azure-monitor/essentials/tutorial-metrics.md).

:::image type="content" source="media/monitor-vm/metrics-explorer.png" lightbox="media/monitor-vm/metrics-explorer.png" alt-text="Screenshot of the 'Metrics' pane in Azure Monitor.":::

For a list of the available metrics, see [Reference: Monitoring Azure virtual machine data](monitor-vm-reference.md#metrics). 

## Analyze logs
Data in Azure Monitor Logs is stored in a Log Analytics workspace, where it's separated into tables, each with its own set of unique properties. 

VM insights store the collected data in logs, and the insights provide performance and map views that you can use to interactively analyze the data. You can work directly with this data to drill down further or perform custom analyses. For more information and to get sample queries for this data, see [How to query logs from VM insights](../azure-monitor/vm/vminsights-log-search.md).

To analyze other log data that you collect from your virtual machines, use [log queries](../azure-monitor/logs/get-started-queries.md) in [Log Analytics](../azure-monitor/logs/log-analytics-tutorial.md). Several [built-in queries](../azure-monitor/logs/queries.md) for virtual machines are available to use, or you can create your own. You can interactively work with the results of these queries, include them in a workbook to make them available to other users, or generate alerts based on their results.

:::image type="content" source="media/monitor-vm/log-analytics-query.png" lightbox="media/monitor-vm/log-analytics-query.png" alt-text="Screenshot of the 'Logs' pane displaying Log Analytics query results.":::

## Alerts
Azure Monitor alerts proactively notify you when important conditions are found in your monitoring data. These alerts can help you identify and address issues in your system before your customers notice them. You can set alerts on [metrics](/azure/azure-monitor/platform/alerts-metric-overview), [logs](/azure/azure-monitor/platform/alerts-unified-log), and the [activity log](/azure/azure-monitor/platform/activity-log-alerts). 

For more information about the various alerts for Azure virtual machines, see the following resources:

- See [Create an alert when an Azure virtual machine is unavailable](../azure-monitor/vm/tutorial-monitor-vm-alert.md) for a tutorial on creating a log query alert for when a virtual machine is unresponsive.
- See [Monitor virtual machines with Azure Monitor: Alerts](../azure-monitor/vm/monitor-virtual-machine-alerts.md) for common alert rules for virtual machines. 
- See [Monitor virtual machines with Azure Monitor: Workloads](../azure-monitor/vm/monitor-virtual-machine-workloads.md) for data you can collect from VM workloads that you can use to create alerts.
- See [Create a log query alert for an Azure resource](../azure-monitor/alerts/tutorial-log-alert.md) for a tutorial on creating a log query alert rule.
- For common log alert rules, go to the **Queries** pane in Log Analytics. For **Resource type**, enter **Virtual machines**, and for **Type**, enter **Alerts**.


## Next steps

For documentation about the logs and metrics that are generated by Azure virtual machines, see [Reference: Monitoring Azure virtual machine data](monitor-vm-reference.md).